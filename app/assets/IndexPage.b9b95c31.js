import{Q as se}from"./QPage.a772fd90.js";import{l as Q,c as p,h as g,m as R,as as de,at as me,ae as j,a0 as ge,au as ce,p as F,am as fe,av as be,aj as G,J as pe,K as ve,L as he,M as ye,r as z,aw as E,O as Ve,w as $,g as _e,ax as N,R as Se,ay as Ie,a5 as P,I as Be,d as K,a9 as W,o as we,a1 as Y,a2 as k,a3 as q,a4 as I,f as a,ad as C,az as f,a6 as x,af as Te,ac as Ce,ag as ke}from"./index.b511c86e.js";import{b as qe,a as H,Q as U}from"./QItem.c4002a3f.js";import{Q as D}from"./QImg.e7fc65ae.js";import{Q as Le}from"./QInnerLoading.4c056742.js";import{u as xe}from"./use-quasar.7b48b8ff.js";var Qe=Q({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const c=p(()=>{const m=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(u=>e[u]===!0).map(u=>`q-btn-group--${u}`).join(" ");return`q-btn-group row no-wrap${m.length!==0?" "+m:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:c.value},R(t.default))}}),$e=Q({name:"QBtnToggle",props:{...de,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(t=>("label"in t||"icon"in t||"slot"in t)&&"value"in t)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:t,emit:c}){const m=p(()=>e.options.find(r=>r.value===e.modelValue)!==void 0),u=p(()=>({type:"hidden",name:e.name,value:e.modelValue})),s=ce(u),o=p(()=>me(e)),y=p(()=>({rounded:e.rounded,dense:e.dense,...o.value})),V=p(()=>e.options.map((r,b)=>{const{attrs:w,value:n,slot:h,...i}=r;return{slot:h,props:{key:b,"aria-pressed":n===e.modelValue?"true":"false",...w,...i,...y.value,disable:e.disable===!0||i.disable===!0,color:n===e.modelValue?d(i,"toggleColor"):d(i,"color"),textColor:n===e.modelValue?d(i,"toggleTextColor"):d(i,"textColor"),noCaps:d(i,"noCaps")===!0,noWrap:d(i,"noWrap")===!0,size:d(i,"size"),padding:d(i,"padding"),ripple:d(i,"ripple"),stack:d(i,"stack")===!0,stretch:d(i,"stretch")===!0,onClick(_){B(n,r,_)}}}}));function B(r,b,w){e.readonly!==!0&&(e.modelValue===r?e.clearable===!0&&(c("update:modelValue",null,null),c("clear")):c("update:modelValue",r,b),c("click",w))}function d(r,b){return r[b]===void 0?e[b]:r[b]}function v(){const r=V.value.map(b=>g(j,b.props,b.slot!==void 0?t[b.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&m.value===!0&&s(r,"push"),ge(t.default,r)}return()=>g(Qe,{class:"q-btn-toggle",...o.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},v)}}),Ue=Q({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:c}){let m=!1,u,s,o=null,y=null,V,B;function d(){u&&u(),u=null,m=!1,o!==null&&(clearTimeout(o),o=null),y!==null&&(clearTimeout(y),y=null),s!==void 0&&s.removeEventListener("transitionend",V),V=null}function v(n,h,i){h!==void 0&&(n.style.height=`${h}px`),n.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,m=!0,u=i}function r(n,h){n.style.overflowY=null,n.style.height=null,n.style.transition=null,d(),h!==B&&c(h)}function b(n,h){let i=0;s=n,m===!0?(d(),i=n.offsetHeight===n.scrollHeight?0:void 0):(B="hide",n.style.overflowY="hidden"),v(n,i,h),o=setTimeout(()=>{o=null,n.style.height=`${n.scrollHeight}px`,V=_=>{y=null,(Object(_)!==_||_.target===n)&&r(n,"show")},n.addEventListener("transitionend",V),y=setTimeout(V,e.duration*1.1)},100)}function w(n,h){let i;s=n,m===!0?d():(B="show",n.style.overflowY="hidden",i=n.scrollHeight),v(n,i,h),o=setTimeout(()=>{o=null,n.style.height=0,V=_=>{y=null,(Object(_)!==_||_.target===n)&&r(n,"hide")},n.addEventListener("transitionend",V),y=setTimeout(V,e.duration*1.1)},100)}return F(()=>{m===!0&&d()}),()=>g(fe,{css:!1,appear:e.appear,onEnter:b,onLeave:w},t.default)}});const T=be({}),je=Object.keys(G);var ze=Q({name:"QExpansionItem",props:{...G,...pe,...ve,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...he,"click","afterShow","afterHide"],setup(e,{slots:t,emit:c}){const{proxy:{$q:m}}=_e(),u=ye(e,m),s=z(e.modelValue!==null?e.modelValue:e.defaultOpened),o=z(null),y=E(),{show:V,hide:B,toggle:d}=Ve({showing:s});let v,r;const b=p(()=>`q-expansion-item q-item-type q-expansion-item--${s.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),w=p(()=>{if(e.contentInsetLevel===void 0)return null;const l=m.lang.rtl===!0?"Right":"Left";return{["padding"+l]:e.contentInsetLevel*56+"px"}}),n=p(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),h=p(()=>{const l={};return je.forEach(S=>{l[S]=e[S]}),l}),i=p(()=>n.value===!0||e.expandIconToggle!==!0),_=p(()=>e.expandedIcon!==void 0&&s.value===!0?e.expandedIcon:e.expandIcon||m.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),X=p(()=>e.disable!==!0&&(n.value===!0||e.expandIconToggle===!0)),J=p(()=>({expanded:s.value===!0,detailsId:e.targetUid,toggle:d,show:V,hide:B})),M=p(()=>{const l=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:m.lang.label[s.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":s.value===!0?"true":"false","aria-controls":y,"aria-label":l}});$(()=>e.group,l=>{r!==void 0&&r(),l!==void 0&&O()});function Z(l){n.value!==!0&&d(l),c("click",l)}function ee(l){l.keyCode===13&&A(l,!0)}function A(l,S){S!==!0&&o.value!==null&&o.value.focus(),d(l),Be(l)}function te(){c("afterShow")}function oe(){c("afterHide")}function O(){v===void 0&&(v=E()),s.value===!0&&(T[e.group]=v);const l=$(s,L=>{L===!0?T[e.group]=v:T[e.group]===v&&delete T[e.group]}),S=$(()=>T[e.group],(L,ue)=>{ue===v&&L!==void 0&&L!==v&&B()});r=()=>{l(),S(),T[e.group]===v&&delete T[e.group],r=void 0}}function ne(){const l={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},S=[g(P,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&s.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:_.value})];return X.value===!0&&(Object.assign(l,{tabindex:0,...M.value,onClick:A,onKeyup:ee}),S.unshift(g("div",{ref:o,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),g(U,l,()=>S)}function le(){let l;return t.header!==void 0?l=[].concat(t.header(J.value)):(l=[g(U,()=>[g(H,{lines:e.labelLines},()=>e.label||""),e.caption?g(H,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&l[e.switchToggleSide===!0?"push":"unshift"](g(U,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>g(P,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&l[e.switchToggleSide===!0?"unshift":"push"](ne()),l}function ae(){const l={ref:"item",style:e.headerStyle,class:e.headerClass,dark:u.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return i.value===!0&&(l.clickable=!0,l.onClick=Z,Object.assign(l,n.value===!0?h.value:M.value)),g(qe,l,le)}function re(){return Se(g("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:w.value,id:y},R(t.default)),[[Ie,s.value]])}function ie(){const l=[ae(),g(Ue,{duration:e.duration,onShow:te,onHide:oe},re)];return e.expandSeparator===!0&&l.push(g(N,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:u.value}),g(N,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:u.value})),l}return e.group!==void 0&&O(),F(()=>{r!==void 0&&r()}),()=>g("div",{class:b.value},[g("div",{class:"q-expansion-item__container relative-position"},ie())])}});const Me=K({name:"Txt2Img",setup(){const e=xe(),t=W(),c=(u,s)=>{try{return e.localStorage.getItem("txt2img_"+u)||s}catch(o){return e.notify(`Error load params: ${o}`),s}},m=z(c("job_id",void 0));return we(()=>{const u=c("job_id","undefined");console.log(u),u!=="undefined"&&(t.loading=!0,t.txt2img_check(u,[])),t.reload_history()}),{store:t,job_id:m}}}),Ae={class:"flex q-gutter-md"};function Oe(e,t,c,m,u,s){return k(),q(Ce,{class:"fit"},{default:I(()=>[a(C,null,{default:I(()=>[a($e,{modelValue:e.store.job_type,"onUpdate:modelValue":t[0]||(t[0]=o=>e.store.job_type=o),push:"",glossy:"","toggle-color":"primary",options:[{label:"SDXL 1.0",value:0},{label:"SDXL ControlNet",value:1}]},null,8,["modelValue"])]),_:1}),e.store.job_type==1?(k(),q(C,{key:0},{default:I(()=>[a(f,{modelValue:e.store.input_image,"onUpdate:modelValue":t[1]||(t[1]=o=>e.store.input_image=o),label:"input image"},null,8,["modelValue"]),a(f,{modelValue:e.store.controlnet_conditioning_scale,"onUpdate:modelValue":t[2]||(t[2]=o=>e.store.controlnet_conditioning_scale=o),label:"controlnet_conditioning_scale"},null,8,["modelValue"])]),_:1})):x("",!0),a(C,null,{default:I(()=>[Te("div",Ae,[a(f,{style:{flex:"1"},modelValue:e.store.prompt,"onUpdate:modelValue":t[3]||(t[3]=o=>e.store.prompt=o),label:"prompt",hint:"The prompt or prompts to guide the image generation. If not defined, one has to pass prompt_embeds. instead."},null,8,["modelValue"]),a(j,{icon:"start",label:"Run",color:"primary",onClick:t[4]||(t[4]=o=>e.store.txt2img_run())})]),a(f,{modelValue:e.store.negative_prompt,"onUpdate:modelValue":t[5]||(t[5]=o=>e.store.negative_prompt=o),label:"negative_prompt"},null,8,["modelValue"]),a(f,{modelValue:e.store.prompt_script,"onUpdate:modelValue":t[6]||(t[6]=o=>e.store.prompt_script=o),label:"prompt_script",autogrow:""},null,8,["modelValue"]),a(f,{modelValue:e.store.seed,"onUpdate:modelValue":t[7]||(t[7]=o=>e.store.seed=o),modelModifiers:{number:!0},label:"seed",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.width,"onUpdate:modelValue":t[8]||(t[8]=o=>e.store.width=o),modelModifiers:{number:!0},label:"width",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.height,"onUpdate:modelValue":t[9]||(t[9]=o=>e.store.height=o),modelModifiers:{number:!0},label:"height",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.num_inference_steps,"onUpdate:modelValue":t[10]||(t[10]=o=>e.store.num_inference_steps=o),modelModifiers:{number:!0},label:"num_inference_steps",type:"number"},null,8,["modelValue"])]),_:1}),a(ze,{"switch-toggle-side":"","expand-separator":"",label:"Extra",caption:"Extra params"},{default:I(()=>[a(C,null,{default:I(()=>[a(f,{modelValue:e.store.guidance_scale,"onUpdate:modelValue":t[11]||(t[11]=o=>e.store.guidance_scale=o),modelModifiers:{number:!0},label:"guidance_scale",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.guidance_rescale,"onUpdate:modelValue":t[12]||(t[12]=o=>e.store.guidance_rescale=o),modelModifiers:{number:!0},label:"guidance_rescale",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.original_size_width,"onUpdate:modelValue":t[13]||(t[13]=o=>e.store.original_size_width=o),modelModifiers:{number:!0},label:"original_size_width",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.original_size_height,"onUpdate:modelValue":t[14]||(t[14]=o=>e.store.original_size_height=o),modelModifiers:{number:!0},label:"original_size_height",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.target_size_width,"onUpdate:modelValue":t[15]||(t[15]=o=>e.store.target_size_width=o),modelModifiers:{number:!0},label:"target_size_width",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.target_size_height,"onUpdate:modelValue":t[16]||(t[16]=o=>e.store.target_size_height=o),modelModifiers:{number:!0},label:"target_size_height",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.crops_coords_top_left_x,"onUpdate:modelValue":t[17]||(t[17]=o=>e.store.crops_coords_top_left_x=o),modelModifiers:{number:!0},label:"crops_coords_top_left_x",type:"number"},null,8,["modelValue"]),a(f,{modelValue:e.store.crops_coords_top_left_y,"onUpdate:modelValue":t[18]||(t[18]=o=>e.store.crops_coords_top_left_y=o),modelModifiers:{number:!0},label:"crops_coords_top_left_y",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e.store.output_image?(k(),q(C,{key:1},{default:I(()=>[a(D,{src:e.store.output_image},null,8,["src"]),e.store.job_type==1?(k(),q(D,{key:0,src:e.store.output_image.replace(".png","_canny.png")},null,8,["src"])):x("",!0)]),_:1})):x("",!0),a(C,null,{default:I(()=>[a(j,{label:"Run",color:"primary",onClick:t[19]||(t[19]=o=>e.store.txt2img_run())})]),_:1}),a(Le,{showing:e.store.loading,label:e.store.since,size:"10rem"},null,8,["showing","label"])]),_:1})}var Ee=Y(Me,[["render",Oe]]);const Ne=K({name:"IndexPage",components:{Txt2Img:Ee},setup(){return{store:W()}}});function Pe(e,t,c,m,u,s){const o=ke("Txt2Img");return k(),q(se,{class:"flex"},{default:I(()=>[e.store.txt2img.is_alive?(k(),q(o,{key:0})):x("",!0)]),_:1})}var We=Y(Ne,[["render",Pe]]);export{We as default};
