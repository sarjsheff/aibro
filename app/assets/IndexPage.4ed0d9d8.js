import{k as M,i as j,t as x,u as ue,V as de,c as b,h as u,l as F,g as K,n as D,aj as ge,aw as me,ag as G,K as ce,x as fe,L as pe,y as be,r as Q,ax as H,N as he,w as k,ay as A,Q as ve,az as ye,a4 as N,J as Ve,d as Y,o as _e,a0 as J,a1 as U,a2 as z,a3 as S,f as i,ad as Ie,aA as g,ac as O,ab as C,a5 as Se,aa as we,ae as xe}from"./index.58cc1721.js";import{c as Te,a as R,Q as q,d as Ce,u as Le,f as $e,e as ke}from"./use-quasar.41ad65e0.js";import"./axios.6e1fcf85.js";var qe=M({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:n}){const{proxy:{$q:m}}=K(),l=j(ue,x);if(l===x)return console.error("QPage needs to be a deep child of QLayout"),x;if(j(de,x)===x)return console.error("QPage needs to be child of QPageContainer"),x;const r=b(()=>{const d=(l.header.space===!0?l.header.size:0)+(l.footer.space===!0?l.footer.size:0);if(typeof e.styleFn=="function"){const c=l.isContainer.value===!0?l.containerHeight.value:m.screen.height;return e.styleFn(d,c)}return{minHeight:l.isContainer.value===!0?l.containerHeight.value-d+"px":m.screen.height===0?d!==0?`calc(100vh - ${d}px)`:"100vh":m.screen.height-d+"px"}}),t=b(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>u("main",{class:t.value,style:r.value},F(n.default))}}),Qe=M({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:n,emit:m}){let l=!1,s,r,t=null,d=null,c,w;function _(){s&&s(),s=null,l=!1,t!==null&&(clearTimeout(t),t=null),d!==null&&(clearTimeout(d),d=null),r!==void 0&&r.removeEventListener("transitionend",c),c=null}function f(a,p,v){p!==void 0&&(a.style.height=`${p}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,l=!0,s=v}function h(a,p){a.style.overflowY=null,a.style.height=null,a.style.transition=null,_(),p!==w&&m(p)}function L(a,p){let v=0;r=a,l===!0?(_(),v=a.offsetHeight===a.scrollHeight?0:void 0):(w="hide",a.style.overflowY="hidden"),f(a,v,p),t=setTimeout(()=>{t=null,a.style.height=`${a.scrollHeight}px`,c=y=>{d=null,(Object(y)!==y||y.target===a)&&h(a,"show")},a.addEventListener("transitionend",c),d=setTimeout(c,e.duration*1.1)},100)}function $(a,p){let v;r=a,l===!0?_():(w="show",a.style.overflowY="hidden",v=a.scrollHeight),f(a,v,p),t=setTimeout(()=>{t=null,a.style.height=0,c=y=>{d=null,(Object(y)!==y||y.target===a)&&h(a,"hide")},a.addEventListener("transitionend",c),d=setTimeout(c,e.duration*1.1)},100)}return D(()=>{l===!0&&_()}),()=>u(ge,{css:!1,appear:e.appear,onEnter:L,onLeave:$},n.default)}});const I=me({}),Ue=Object.keys(G);var ze=M({name:"QExpansionItem",props:{...G,...ce,...fe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...pe,"click","afterShow","afterHide"],setup(e,{slots:n,emit:m}){const{proxy:{$q:l}}=K(),s=be(e,l),r=Q(e.modelValue!==null?e.modelValue:e.defaultOpened),t=Q(null),d=H(),{show:c,hide:w,toggle:_}=he({showing:r});let f,h;const L=b(()=>`q-expansion-item q-item-type q-expansion-item--${r.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),$=b(()=>{if(e.contentInsetLevel===void 0)return null;const o=l.lang.rtl===!0?"Right":"Left";return{["padding"+o]:e.contentInsetLevel*56+"px"}}),a=b(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),p=b(()=>{const o={};return Ue.forEach(V=>{o[V]=e[V]}),o}),v=b(()=>a.value===!0||e.expandIconToggle!==!0),y=b(()=>e.expandedIcon!==void 0&&r.value===!0?e.expandedIcon:e.expandIcon||l.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),W=b(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),X=b(()=>({expanded:r.value===!0,detailsId:e.targetUid,toggle:_,show:c,hide:w})),B=b(()=>{const o=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:l.lang.label[r.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":r.value===!0?"true":"false","aria-controls":d,"aria-label":o}});k(()=>e.group,o=>{h!==void 0&&h(),o!==void 0&&P()});function Z(o){a.value!==!0&&_(o),m("click",o)}function ee(o){o.keyCode===13&&E(o,!0)}function E(o,V){V!==!0&&t.value!==null&&t.value.focus(),_(o),Ve(o)}function te(){m("afterShow")}function ne(){m("afterHide")}function P(){f===void 0&&(f=H()),r.value===!0&&(I[e.group]=f);const o=k(r,T=>{T===!0?I[e.group]=f:I[e.group]===f&&delete I[e.group]}),V=k(()=>I[e.group],(T,se)=>{se===f&&T!==void 0&&T!==f&&w()});h=()=>{o(),V(),I[e.group]===f&&delete I[e.group],h=void 0}}function oe(){const o={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},V=[u(N,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&r.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:y.value})];return W.value===!0&&(Object.assign(o,{tabindex:0,...B.value,onClick:E,onKeyup:ee}),V.unshift(u("div",{ref:t,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),u(q,o,()=>V)}function ae(){let o;return n.header!==void 0?o=[].concat(n.header(X.value)):(o=[u(q,()=>[u(R,{lines:e.labelLines},()=>e.label||""),e.caption?u(R,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&o[e.switchToggleSide===!0?"push":"unshift"](u(q,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>u(N,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&o[e.switchToggleSide===!0?"unshift":"push"](oe()),o}function le(){const o={ref:"item",style:e.headerStyle,class:e.headerClass,dark:s.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return v.value===!0&&(o.clickable=!0,o.onClick=Z,Object.assign(o,a.value===!0?p.value:B.value)),u(Te,o,ae)}function ie(){return ve(u("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:$.value,id:d},F(n.default)),[[ye,r.value]])}function re(){const o=[le(),u(Qe,{duration:e.duration,onShow:te,onHide:ne},ie)];return e.expandSeparator===!0&&o.push(u(A,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),u(A,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),o}return e.group!==void 0&&P(),D(()=>{h!==void 0&&h()}),()=>u("div",{class:L.value},[u("div",{class:"q-expansion-item__container relative-position"},re())])}});const Me=Y({name:"Txt2Img",setup(){const e=Ce(),n=Le(),m=(s,r)=>{try{return e.localStorage.getItem("txt2img_"+s)||r}catch(t){return e.notify(`Error load params: ${t}`),r}},l=Q(m("job_id",void 0));return _e(()=>{const s=m("job_id","undefined");console.log(s),s!=="undefined"&&(n.loading=!0,n.txt2img_check(s,[])),n.reload_history()}),{store:n,job_id:l}}}),Be={class:"flex q-gutter-md"};function Ee(e,n,m,l,s,r){return U(),z(we,{class:"fit"},{default:S(()=>[i(C,null,{default:S(()=>[Ie("div",Be,[i(g,{style:{flex:"1"},modelValue:e.store.prompt,"onUpdate:modelValue":n[0]||(n[0]=t=>e.store.prompt=t),label:"prompt",hint:"The prompt or prompts to guide the image generation. If not defined, one has to pass prompt_embeds. instead."},null,8,["modelValue"]),i(O,{icon:"start",label:"Run",color:"primary",onClick:n[1]||(n[1]=t=>e.store.txt2img_run())})]),i(g,{modelValue:e.store.negative_prompt,"onUpdate:modelValue":n[2]||(n[2]=t=>e.store.negative_prompt=t),label:"negative_prompt"},null,8,["modelValue"]),i(g,{modelValue:e.store.prompt_script,"onUpdate:modelValue":n[3]||(n[3]=t=>e.store.prompt_script=t),label:"prompt_script",autogrow:""},null,8,["modelValue"]),i(g,{modelValue:e.store.seed,"onUpdate:modelValue":n[4]||(n[4]=t=>e.store.seed=t),modelModifiers:{number:!0},label:"seed",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.width,"onUpdate:modelValue":n[5]||(n[5]=t=>e.store.width=t),modelModifiers:{number:!0},label:"width",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.height,"onUpdate:modelValue":n[6]||(n[6]=t=>e.store.height=t),modelModifiers:{number:!0},label:"height",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.num_inference_steps,"onUpdate:modelValue":n[7]||(n[7]=t=>e.store.num_inference_steps=t),modelModifiers:{number:!0},label:"num_inference_steps",type:"number"},null,8,["modelValue"])]),_:1}),i(ze,{"switch-toggle-side":"","expand-separator":"",label:"Extra",caption:"Extra params"},{default:S(()=>[i(C,null,{default:S(()=>[i(g,{modelValue:e.store.guidance_scale,"onUpdate:modelValue":n[8]||(n[8]=t=>e.store.guidance_scale=t),modelModifiers:{number:!0},label:"guidance_scale",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.guidance_rescale,"onUpdate:modelValue":n[9]||(n[9]=t=>e.store.guidance_rescale=t),modelModifiers:{number:!0},label:"guidance_rescale",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.original_size_width,"onUpdate:modelValue":n[10]||(n[10]=t=>e.store.original_size_width=t),modelModifiers:{number:!0},label:"original_size_width",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.original_size_height,"onUpdate:modelValue":n[11]||(n[11]=t=>e.store.original_size_height=t),modelModifiers:{number:!0},label:"original_size_height",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.target_size_width,"onUpdate:modelValue":n[12]||(n[12]=t=>e.store.target_size_width=t),modelModifiers:{number:!0},label:"target_size_width",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.target_size_height,"onUpdate:modelValue":n[13]||(n[13]=t=>e.store.target_size_height=t),modelModifiers:{number:!0},label:"target_size_height",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.crops_coords_top_left_x,"onUpdate:modelValue":n[14]||(n[14]=t=>e.store.crops_coords_top_left_x=t),modelModifiers:{number:!0},label:"crops_coords_top_left_x",type:"number"},null,8,["modelValue"]),i(g,{modelValue:e.store.crops_coords_top_left_y,"onUpdate:modelValue":n[15]||(n[15]=t=>e.store.crops_coords_top_left_y=t),modelModifiers:{number:!0},label:"crops_coords_top_left_y",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e.store.output_image?(U(),z(C,{key:0},{default:S(()=>[i($e,{src:e.store.output_image},null,8,["src"])]),_:1})):Se("",!0),i(C,null,{default:S(()=>[i(O,{label:"Run",color:"primary",onClick:n[16]||(n[16]=t=>e.store.txt2img_run())})]),_:1}),i(ke,{showing:e.store.loading,label:e.store.since,size:"10rem"},null,8,["showing","label"])]),_:1})}var Pe=J(Me,[["render",Ee]]);const je=Y({name:"IndexPage",components:{Txt2Img:Pe}});function He(e,n,m,l,s,r){const t=xe("Txt2Img");return U(),z(qe,{class:"flex"},{default:S(()=>[i(t)]),_:1})}var Re=J(je,[["render",He]]);export{Re as default};
